<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>wxPdfDocument: MakeFont Utility</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">wxPdfDocument
   &#160;<span id="projectnumber">0.9.7</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">MakeFont Utility </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="mkfontadd"></a>
Adding new fonts and encoding support</h1>
<p>This section explains how to use <b>TrueType</b> or <b>Type1</b> fonts so that you are not limited to the standard fonts any more. The other interest is that you can choose the font encoding, which allows you to use other languages than the Western ones (the standard fonts having too few available characters).</p>
<p>There are two ways to use a new font: embedding it in the PDF or not. When a font is not embedded, it is sought in the system. The advantage is that the PDF file is lighter; on the other hand, if it is not available, a substitution font is used. So it is preferable to ensure that the needed font is installed on the client systems. If the file is to be viewed by a large audience, it is better to embed the fonts.</p>
<p>Adding a new font requires three steps for <b>TrueType</b> fonts:</p>
<ul>
<li>Generation of the metric file (.afm) </li>
<li>Generation of the font definition file (.xml) </li>
<li>Declaration of the font in the program</li>
</ul>
<p>For <b>Type1</b>, the first one is theoretically not necessary because the AFM file is usually shipped with the font. In case you have only a metric file in PFM format, it must be converted to AFM first.</p>
<h1><a class="anchor" id="mkfontgen1"></a>
Generation of the metric file</h1>
<p>The first step for a <b>TrueType</b> font consists in generating the AFM file (or UFM file in case of a <b>Unicode TrueType</b> font). A utility exists to do this task: <code>ttf2ufm</code> - a special version of <code>ttf2pt1</code> - allowing to create AFM and/or UFM files. <code>ttf2ufm</code> has been modified to generate AFM and UFM files containing all the information which is required by the utility program <b>makefont</b>. An archive containing the modified source code of <code>ttf2ufm</code> and a Windows executable can be downloaded from <b><a href="http://wxcode.sourceforge.net/docs/wxpdfdoc/ttf2ufm.zip">here</a></b>. The command line to use is the following:</p>
<p><code>ttf2ufm -a font.ttf font </code></p>
<p>For example, for Comic Sans MS Regular:</p>
<p><code>ttf2ufm -a c:/windows/fonts/comic.ttf comic </code></p>
<p>Two files are created; the one we are interested in is comic.afm.</p>
<dl class="section remark"><dt>Remarks</dt><dd>Starting with <a class="el" href="classwx_pdf_document.html" title="Class representing a PDF document. ">wxPdfDocument</a> version 0.8.5 this step may be ommitted for TrueType and OpenType fonts.</dd></dl>
<h1><a class="anchor" id="mkfontgen2"></a>
Generation of the font definition file</h1>
<p>The second step consists in generating a <a class="el" href="classwx_pdf_document.html" title="Class representing a PDF document. ">wxPdfDocument</a> font metrics XML file containing all the information needed by <a class="el" href="classwx_pdf_document.html" title="Class representing a PDF document. ">wxPdfDocument</a>; in addition, the font file is compressed. To do this, a utility program, <b>makefont</b>, is provided.</p>
<p><code>makefont {-a font.afm | -u font.ufm | -i } [-f font.{ttf|pfb}] [-e encoding] [-p patch] [-t {ttf|otf|t1}] [-o outdir]</code></p>
<table border="0">
<tr>
<td><code>-a font.afm</code></td><td>AFM font metric file for <b>TrueType</b> or <b>Type1</b> fonts </td></tr>
<tr>
<td><code>-u font.ufm</code></td><td>UFM font metric file for <b>TrueType Unicode</b> or <b>OpenType Unicode</b> fonts </td></tr>
<tr>
<td><code>-i</code></td><td>Extract font metrics directly from <b>TrueType Unicode</b> or <b>OpenType Unicode</b> fonts </td></tr>
<tr>
<td valign="top"><code>-f font.{ttf|otf|pfb}</code></td><td>font file (<code>.ttf</code> = TrueType, <code>.otf</code> = OpenType, <code>.pfb</code> = Type1). <br />
If you own a Type1 font in ASCII format (<code>.pfa</code>), you can convert it to binary format with <a href="http://www.lcdf.org/~eddietwo/type/#t1utils">t1utils</a>. <br />
If you don't want to embed the font, omit this parameter. In this case, type is given by the type parameter.  </td></tr>
<tr>
<td valign="top"><code>-e encoding</code></td><td><p class="starttd">font encoding, i.e. cp1252. Omit this parameter for a symbolic font.like <em>Symbol</em> or <em>ZapfDingBats</em>.</p>
<p>The encoding defines the association between a code (from 0 to 255) and a character. The first 128 are fixed and correspond to ASCII; the following are variable. The encodings are stored in .map files. Those available are:</p>
<ul>
<li>cp1250 (Central Europe) </li>
<li>cp1251 (Cyrillic) </li>
<li>cp1252 (Western Europe) </li>
<li>cp1253 (Greek) </li>
<li>cp1254 (Turkish) </li>
<li>cp1255 (Hebrew) </li>
<li>cp1257 (Baltic) </li>
<li>cp1258 (Vietnamese) </li>
<li>cp874 (Thai) </li>
<li>iso-8859-1 (Western Europe) </li>
<li>iso-8859-2 (Central Europe) </li>
<li>iso-8859-4 (Baltic) </li>
<li>iso-8859-5 (Cyrillic) </li>
<li>iso-8859-7 (Greek) </li>
<li>iso-8859-9 (Turkish) </li>
<li>iso-8859-11 (Thai) </li>
<li>iso-8859-15 (Western Europe) </li>
<li>iso-8859-16 (Central Europe) </li>
<li>koi8-r (Russian) </li>
<li>koi8-u (Ukrainian)</li>
</ul>
<p>Of course, the font must contain the characters corresponding to the chosen encoding. The encodings which begin with cp are those used by Windows; Linux systems usually use ISO. Remark: the standard fonts use cp1252.</p>
<p class="endtd"><b>Note:</b> For TrueType Unicode and OpenType Unicode fonts this parameter is ignored.  </p>
</td></tr>
<tr>
<td valign="top"><code>-p patch</code></td><td><p class="starttd">patch file for individual encoding changes. Use the same format as the <code>.map</code> files for encodings. A patch file gives the possibility to alter the encoding. Sometimes you may want to add some characters. For instance, ISO-8859-1 does not contain the euro symbol. To add it at position 164, create a file containing the line </p>
<p><code>!A0 U+20AC Euro</code> </p>
<p><b>Note:</b> The Unicode character id will not be interpreted.</p>
<p class="endtd">For TrueType Unicode and OpenType Unicode fonts this parameter is ignored.  </p>
</td></tr>
<tr>
<td><code>-t {ttf|otf|t1}</code></td><td>font type (ttf = TrueType, otf = OpenType, t1 = Type1). Only needed if omitting the font file. </td></tr>
<tr>
<td><code>-o outdir</code></td><td>the output directory for all generated files (default: current working directory) </td></tr>
</table>
<p><b>Note:</b> in the case of a font with the same name as a standard one, for instance arial.ttf, it is mandatory to embed. If you don't, Acrobat will use its own font.</p>
<p>Executing <code>makefont</code> generates an .xml file, with the same name as the <code>.afm</code> file resp. <code>.ufm</code> file. You may rename it if you wish. In case of embedding the font file is compressed and gives a file with <code>.z</code> as extension. For <b>Unicode TrueType</b> fonts a file with extension <code>.ctg.z</code> is created containing the character to glyph mapping.You may rename these files, too, but in this case you have to alter the file name(s) in the file tag in the <code>.xml</code> file accordingly.</p>
<p>You have to copy the generated file(s) to the font directory.</p>
<h1><a class="anchor" id="mkfontdecl"></a>
Declaration of the font in the script</h1>
<p>The last step is the most simple. You just need to call the AddFont() method. For instance:</p>
<p><code>pdf.AddFont(wxS("Comic"),wxS(""),wxS("comic.xml"));</code></p>
<p>or simply:</p>
<p><code>pdf.AddFont(wxS("Comic"));</code></p>
<p>And the font is now available (in regular and underlined styles), usable like the others. If we had worked with Comic Sans MS Bold (comicbd.ttf), we would have put:</p>
<p><code>pdf.AddFont(wxS("Comic"),wxS("B"),wxS("comicbd.xml"));</code></p>
<h1><a class="anchor" id="mkfontreduce"></a>
Reducing the size of TrueType fonts</h1>
<p>Font files are often quite voluminous; this is due to the fact that they contain the characters corresponding to many encodings. zlib compression reduces them but they remain fairly big. A technique exists to reduce them further. It consists in converting the font to the <b>Type1</b> format with <code>ttf2pt1</code> by specifying the encoding you are interested in; all other characters will be discarded. For instance, the arial.ttf font shipped with Windows 98 is 267KB (it contains 1296 characters). After compression it gives 147. Let's convert it to <b>Type1</b> by keeping only cp1250 characters:</p>
<p><code>ttf2ufm -b -L cp1250.map c:/windows/fonts/arial.ttf arial </code></p>
<p>The <code>.map</code> files are located in the <code>makefont</code> directory. The command produces arial.pfb and arial.afm. The arial.pfb file is only 35KB, and 30KB after compression.</p>
<p>It is possible to go even further. If you are interested only in a subset of the encoding (you probably don't need all 217 characters), you can open the .map file and remove the lines you are not interested in. This will reduce the file size accordingly.</p>
<p>Since <a class="el" href="classwx_pdf_document.html" title="Class representing a PDF document. ">wxPdfDocument</a> version 0.8.0 automatic font subsetting is supported for TrueType und TrueType Unicode fonts. Since version 0.8.5 subsetting of OpenType Unicode fonts is supported as well. <b>Note</b>: The font license must allow embedding and subsetting. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jan 9 2019 19:51:04 for wxPdfDocument by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
